function openPointModal(point){
    activePoint = point;
    document.getElementById('point-modal').style.display = 'flex';
    document.getElementById('pm-info').textContent = `Мощность: ${point.power.toFixed(1)}`;
    document.getElementById('ads-count').textContent = playerAds;
    
    // кнопка внутри модального окна
    const adBtn = document.getElementById('pm-ad-btn');
    adBtn.onclick = ()=>{
        playerAds++;
        if(!point.collected && playerAds >= point.adsRequired){
            point.collected = true;
            playerPower += point.power;
            document.getElementById('power-total').textContent = playerPower.toFixed(1);
            document.getElementById('ads-count').textContent = playerAds;
            savePlayerPower();
            map.removeLayer(point.marker);
            closePointModal();
        } else {
            document.getElementById('ads-count').textContent = playerAds;
        }
    };
}

function closePointModal(){
    document.getElementById('point-modal').style.display = 'none';
    activePoint = null;
}
