<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Animal Fest Moldova 2026</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
        background-color: #E9E8E6;
    }
    #splash {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background-color: #6A0DAD;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        z-index: 9999;
        opacity: 0;
        animation: fadeIn 1s forwards;
    }
    .splash-bg {
        position: relative;
        width: 220px;
        height: 220px;
        background-color: #FFF;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        background-image: url('cow_pattern.png');
        background-size: cover;
        margin-top: 20px;
    }
    .splash-img {
        width: 200px;
        height: 200px;
        object-fit: cover;
        border-radius: 50%;
        border: 5px solid #111;
    }
    #splash .partners-title {
        margin-top: 10px;
        font-size: 26px;
        font-weight: bold;
        color: #FFD700; 
        text-shadow: 2px 2px 4px rgba(0,0,0,0.6);
        background-color: rgba(0,0,0,0.2);
        padding: 6px 12px;
        border-radius: 6px;
    }
    #splash .sponsors {
        margin-top: 40px;
        display: flex;
        justify-content: center;
        gap: 30px;
    }
    #splash .sponsors div {
        background-color: rgba(17,17,17,0.95);
        color: #FFD700;
        font-weight: bold;
        font-size: 20px;
        padding: 9px 19px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        cursor: default;
        display: inline-block;
        white-space: nowrap;
        text-shadow: none;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
    #main-content { display: none; padding-top: 10px; }
    .festival-title {
        display: block;
        width: 90%;
        max-width: 800px;
        margin: 0 auto 20px auto;
    }
    .paw-container {
        display: flex;
        justify-content: space-around;
        align-items: flex-start;
        width: 100%;
        flex-wrap: nowrap;
        gap: 20px;
        margin-top: 20px;
    }
    .paw-btn {
        width: 40vw;
        max-width: 250px;
        aspect-ratio: 1/1;
        border: none;
        cursor: pointer;
        border-radius: 50%;
        overflow: hidden;
        background-color: transparent;
        background-size: cover;
        background-position: center;
        box-shadow: 0 10px 15px rgba(0,0,0,0.3);
        transition: transform 0.15s, box-shadow 0.15s, filter 0.15s;
        position: relative;
    }
    .paw-btn:hover {
        filter: brightness(1.2);
        transform: translateY(-5px);
        box-shadow: 0 15px 20px rgba(0,0,0,0.35);
    }
    .paw-btn:active {
        transform: translateY(3px) scale(0.95);
        box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    .paw-label {
        margin-top: 10px;
        font-size: 18px;
        font-weight: bold;
        color: #000000;
    }
    .center-extra {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 30px;
    }

    /* Прогресс-бар основной фонд */
    #prize-bar-container {
        width: 90%;
        max-width: 800px;
        height: 28px;
        margin: 10px auto 20px auto;
        background-color: #ccc;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
        border: 2px solid #00FF00;
        display: flex;
    }
    #prize-bar-fill {
        display: flex;
        height: 100%;
        width: 100%;
    }
    #prize-bar-fill span {
        flex: 1;
        border-right: 1px solid #ccc;
        background-color: #7CFC00; /* кислотный светло-зеленый */
        opacity: 0;
        transition: opacity 0.3s;
    }
    #prize-bar-text {
        position: absolute;
        width: 100%;
        text-align: center;
        top: 0;
        line-height: 28px;
        font-weight: bold;
        color: #000;
        pointer-events: none;
    }

    /* Прогресс-бар помощь приютам */
    #shelter-bar-container {
        width: 90%;
        max-width: 800px;
        height: 28px;
        margin: 10px auto 20px auto;
        background-color: #ccc;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
        border: 2px solid #FF00FF;
        display: flex;
    }
    #shelter-bar-fill {
        display: flex;
        height: 100%;
        width: 100%;
    }
    #shelter-bar-fill span {
        flex: 1;
        border-right: 1px solid #ccc;
        background-color: #FF69B4; /* ярко кислотно-розовый */
        opacity: 0;
        transition: opacity 0.3s;
    }
    #shelter-bar-text {
        position: absolute;
        width: 100%;
        text-align: center;
        top: 0;
        line-height: 28px;
        font-weight: bold;
        color: #000;
        pointer-events: none;
    }
</style>
</head>
<body>
<div id="splash">
    <div class="splash-bg">
        <img src="Кошка с букетом.jpeg" alt="Animal Fest Moldova 2026" class="splash-img">
    </div>
    <div class="partners-title">Спонсоры и партнёры</div>
    <div class="sponsors">
        <div id="sponsor1">AMBROS SRL</div>
        <div id="sponsor2">Zoomagazin.md</div>
    </div>
</div>

<!-- Основной призовой фонд -->
<div id="prize-bar-container">
    <div id="prize-bar-fill"></div>
    <div id="prize-bar-text">Призовой фонд: <span id="prize-amount">20000</span> лей</div>
</div>

<!-- Бар помощь приютам -->
<div id="shelter-bar-container">
    <div id="shelter-bar-fill"></div>
    <div id="shelter-bar-text">Помощь приютам: <span id="shelter-amount">0</span> лей</div>
</div>

<div id="main-content">
    <img src="20260117_213955.jpg" alt="Animal Fest Moldova 2026" class="festival-title">
    <div class="paw-container">
      <div style="display:flex; flex-direction:column; align-items:center; gap:15px;">
        <button class="paw-btn" id="addPhoto" style="background-image: url('°•♡Pata de gato♡•°.jpeg');"></button>
        <div class="paw-label">Добавить фото</div>
        <button class="paw-btn" id="increaseRating" style="background-image: url('Синяя лапка.jpeg');"></button>
        <div class="paw-label">Подними свой рейтинг</div>
      </div>
      <div style="display:flex; flex-direction:column; align-items:center; gap:15px;">
        <button class="paw-btn" id="vote" style="background-image: url('°•♡Pata de gato♡•°.jpeg');"></button>
        <div class="paw-label">Голосовать</div>
        <button class="paw-btn" id="increaseFund" style="background-image: url('Синяя лапка.jpeg');"></button>
        <div class="paw-label">Увеличь сумму призового фонда</div>
      </div>
    </div>
    <div class="center-extra">
        <button class="paw-btn" id="helpShelters" style="background-image: url('Разноцветное сердечко.jpeg');"></button>
        <div class="paw-label">Смотри и помогай приютам</div>
    </div>
    <div class="sponsors">
        <div>Ambros SRL</div>
        <div>Zoomagazin.md</div>
    </div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

setTimeout(() => {
    const splash = document.getElementById("splash");
    splash.style.animation = "fadeOut 1s forwards";
    setTimeout(() => {
        splash.style.display = "none";
        document.getElementById("main-content").style.display = "block";
    }, 1000);
}, 4000);

// Основной фонд
function addPhoto() { tg.sendData(JSON.stringify({ action: "add_photo" })); }
function vote() { tg.sendData(JSON.stringify({ action: "vote" })); }
function increaseRating() { tg.sendData(JSON.stringify({ action: "increase_rating" })); }

let fundProgress = 0;
const fundBlocks = 20;

function increaseFund() {
    tg.sendData(JSON.stringify({ action: "increase_fund" }));

    fundProgress++;
    if(fundProgress > fundBlocks){
        fundProgress = 0;
        let prize = document.getElementById("prize-amount");
        prize.textContent = parseInt(prize.textContent) + 1;
    }

    const fill = document.getElementById("prize-bar-fill");
    fill.innerHTML = '';
    for(let i=0;i<fundBlocks;i++){
        const span = document.createElement('span');
        if(i < fundProgress){
            setTimeout(()=>{span.style.opacity = '1';}, i*50);
        }
        fill.appendChild(span);
    }
}

// Бар помощь приютам
let shelterProgress = 0;
const shelterBlocks = 20;

function helpShelters() {
    tg.sendData(JSON.stringify({ action: "help_shelters" }));

    shelterProgress++;
    if(shelterProgress > shelterBlocks){
        shelterProgress = 0;
        let shelter = document.getElementById("shelter-amount");
        shelter.textContent = parseInt(shelter.textContent) + 1;
    }

    const fill = document.getElementById("shelter-bar-fill");
    fill.innerHTML = '';
    for(let i=0;i<shelterBlocks;i++){
        const span = document.createElement('span');
        if(i < shelterProgress){
            setTimeout(()=>{span.style.opacity = '1';}, i*50);
        }
        fill.appendChild(span);
    }
}

document.getElementById("addPhoto").onclick = addPhoto;
document.getElementById("vote").onclick = vote;
document.getElementById("increaseRating").onclick = increaseRating;
document.getElementById("increaseFund").onclick = increaseFund;
document.getElementById("helpShelters").onclick = helpShelters;
</script>
</body>
</html>
