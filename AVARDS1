def handle_request(text: str, user_id: Optional[int] = None) -> str:
    """
    –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ Aetherium
    """

    # -------------------------
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º intent
    # -------------------------
    intent = detect_intent(text)

    # -------------------------
    # –õ–æ–≥–∏—Ä—É–µ–º –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ
    # -------------------------
    print(f"DEBUG: –í—Ö–æ–¥—è—â–∏–π user_id={user_id}, —Ç–µ–∫—Å—Ç='{text}', intent={intent}")

    # -------------------------
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º
    # -------------------------
    mode = MODE_OWNER if user_id in OWNER_IDS else MODE_USER
    print(f"DEBUG: –û–ø—Ä–µ–¥–µ–ª—ë–Ω —Ä–µ–∂–∏–º: {mode}")

    # -------------------------
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    # -------------------------
    if user_id is not None:
        add_message(user_id, "user", text)

    # -------- OWNER --------
    if mode == MODE_OWNER:
        if intent == "owner_command":
            reply = (
                "–ö–æ–º–∞–Ω–¥—É –ø–æ–Ω—è–ª.\n"
                "–ù–∞–ø–∏—à–∏ –ß–Å–¢–ö–û:\n"
                "‚Ä¢ –¥–µ–π—Å—Ç–≤–∏–µ\n"
                "‚Ä¢ –ø—É—Ç—å\n"
                "‚Ä¢ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ"
            )
        else:
            reply = "–Ø –≥–æ—Ç–æ–≤. –ß—Ç–æ –¥–µ–ª–∞–µ–º?"

    # -------- USER --------
    else:
        if intent == "owner_command":
            reply = "–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ üôÇ"
        else:
            reply = "–ü—Ä–∏–≤–µ—Ç! –ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å."

    # -------------------------
    # –õ–æ–≥–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
    # -------------------------
    print(f"DEBUG: –û—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è user_id={user_id}: {reply}")

    # -------------------------
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç
    # -------------------------
    if user_id is not None:
        add_message(user_id, "assistant", reply)

    return reply
