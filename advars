def generate_heatmap():
    temp, weather_desc = get_weather()
    emoji = demand_emoji(temp)

    heatmap = f"üå° –ü–æ–≥–æ–¥–∞ –≤ –ö–∏—à–∏–Ω—ë–≤–µ: {temp:.1f}¬∞C, {weather_desc}\n\n"
    heatmap += "üî•‚ö°‚ùÑ –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ —Å–ø—Ä–æ—Å–∞:\n\n"
    heatmap += f"üëó –û–¥–µ–∂–¥–∞ –∏ –æ–±—É–≤—å: {emoji} –ó–∏–º–Ω—è—è –æ–¥–µ–∂–¥–∞, ‚ö° –°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è, ‚ùÑ –õ–µ—Ç–Ω—è—è\n"
    heatmap += f"üì± –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞: {emoji} –°–º–∞—Ä—Ç—Ñ–æ–Ω—ã, ‚ö° –ù–∞—É—à–Ω–∏–∫–∏, ‚ùÑ –ö–æ–º–ø—å—é—Ç–µ—Ä—ã\n"
    heatmap += f"üè† –¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–æ–º–∞: {emoji} –û–±–æ–≥—Ä–µ–≤–∞—Ç–µ–ª–∏, ‚ö° –ü–æ—Å—Ç–µ–ª—å, ‚ùÑ –ö—É—Ö–Ω—è\n"
    heatmap += f"üèãÔ∏è –°–ø–æ—Ä—Ç: {emoji} –ó–∏–º–Ω–∏–µ –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞, ‚ö° –°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –æ–±—É–≤—å, ‚ùÑ –í–µ–ª–æ—Å–∏–ø–µ–¥—ã\n"
    heatmap += f"üíÑ –ö—Ä–∞—Å–æ—Ç–∞: {emoji} –£–≤–ª–∞–∂–Ω–µ–Ω–∏–µ, ‚ö° –ü–∞—Ä—Ñ—é–º–µ—Ä–∏—è, ‚ùÑ –õ–µ—Ç–Ω—è—è –∫–æ—Å–º–µ—Ç–∏–∫–∞\n"
    heatmap += f"ü•¶ –ü—Ä–æ–¥—É–∫—Ç—ã: {emoji} –ó–∏–º–Ω–∏–µ —Ñ—Ä—É–∫—Ç—ã, ‚ö° –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ, ‚ùÑ –°–≤–µ–∂–∏–µ –æ–≤–æ—â–∏\n"

    # ====== –ü–∞—Å—Å–∞–∂–∏—Ä–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏ ======
    try:
        from analytics.passenger_interest import get_passenger_interest
        passenger = get_passenger_interest()
        if passenger.get("total_ads", 0) == 0:
            raise ValueError("–î–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")
        heatmap += (
            "\nüöê –ü–∞—Å—Å–∞–∂–∏—Ä–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏ (–ú–æ–ª–¥–æ–≤–∞):\n"
            f"–û–±—ä—è–≤–ª–µ–Ω–∏–π: {passenger['total_ads']}\n"
            f"–°–≤–µ–∂–∏–µ: {passenger['fresh_ads']}\n"
            f"–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: {passenger['views']}\n"
            f"–ò–Ω—Ç–µ—Ä–µ—Å: üî• {passenger['interest_score']}\n"
        )
    except Exception:
        heatmap += "\nüöê –ü–∞—Å—Å–∞–∂–∏—Ä–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏: –¥–∞–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã\n"

    return heatmap
